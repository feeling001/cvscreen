<!-- Section à ajouter dans candidates.component.html après le search-bar -->

<!-- Duplicates Detection Panel -->
<div class="duplicates-panel" *ngIf="duplicates.length > 0">
  <mat-expansion-panel class="duplicates-expansion" [expanded]="true">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <mat-icon class="warning-icon">warning</mat-icon>
        <span>Potential Duplicates Found ({{ duplicates.length }})</span>
      </mat-panel-title>
    </mat-expansion-panel-header>

    <div class="duplicates-content">
      <p class="duplicates-info">
        <mat-icon>info</mat-icon>
        These candidates have similar names. Review them to determine if they should be merged.
      </p>

      <div class="duplicates-list">
        <mat-card *ngFor="let duplicate of duplicates" class="duplicate-card">
          <mat-card-content>
            <div class="duplicate-header">
              <div class="duplicate-names">
                <div class="candidate-name">
                  <mat-icon>person</mat-icon>
                  <strong>{{ duplicate.candidate1.firstName }} {{ duplicate.candidate1.lastName }}</strong>
                </div>
                <mat-icon class="vs-icon">compare_arrows</mat-icon>
                <div class="candidate-name">
                  <mat-icon>person</mat-icon>
                  <strong>{{ duplicate.candidate2.firstName }} {{ duplicate.candidate2.lastName }}</strong>
                </div>
              </div>
              <mat-chip 
                class="similarity-chip"
                [class.high-similarity]="getSimilarityPercentage(duplicate) >= 95"
                [class.medium-similarity]="getSimilarityPercentage(duplicate) >= 85 && getSimilarityPercentage(duplicate) < 95">
                {{ getSimilarityPercentage(duplicate) }}% Similar
              </mat-chip>
            </div>

            <div class="duplicate-actions">
              <button mat-raised-button color="primary" (click)="compareDuplicates(duplicate)">
                <mat-icon>visibility</mat-icon>
                Compare Details
              </button>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </mat-expansion-panel>
</div>
